(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{4023:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/messages/emails",function(){return a(8806)}])},2850:function(e,s){"use strict";s.Z={src:"/_next/static/media/user.65ae10af.jpg",height:150,width:150,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAoAP/xAAcEAABAwUAAAAAAAAAAAAAAAARABITAQIUITH/2gAIAQEAAT8AmtymSV4GjRX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:8}},9845:function(e){e.exports={SMS:"Message_Links_SMS__86Cfb",Email:"Message_Links_Email__3ZYMm",chat_window:"Message_Links_chat_window__P8ZTC",message_board:"Message_Links_message_board__oImOG",search_bar:"Message_Links_search_bar__KyRG3",active:"Message_Links_active__fzsvw",sender:"Message_Links_sender__zxczY",position:"Message_Links_position__3yyAg",content:"Message_Links_content__vhlzr",timestamp:"Message_Links_timestamp__DHjbs",chat:"Message_Links_chat__9YDum",the_head:"Message_Links_the_head__PTxnB",email:"Message_Links_email__pfbve",email_view:"Message_Links_email_view__GoG9z",body:"Message_Links_body__YOovC",the_message:"Message_Links_the_message__Oq9m_",messages:"Message_Links_messages__AhKGe",message:"Message_Links_message__hlHCw",input:"Message_Links_input__FFtH_",new_form_container:"Message_Links_new_form_container__fr3yt",container:"Message_Links_container__fa3AQ",sms:"Message_Links_sms__MYVJq",recipient:"Message_Links_recipient__wSObL",the_subject:"Message_Links_the_subject__71jj2",the_footer:"Message_Links_the_footer__cclM2",send:"Message_Links_send__KlqWx",close_button:"Message_Links_close_button__T3V9c"}},4687:function(e){e.exports={Messages:"Messages_Messages__ryc_B",ul1:"Messages_ul1__Qi9fG",ul2:"Messages_ul2__Ef1Yj",new_form_container:"Messages_new_form_container__1yxRN",container:"Messages_container__stXc8",sms:"Messages_sms__yMEO2",the_head:"Messages_the_head__ubaki",recipient:"Messages_recipient__VE0fV",the_subject:"Messages_the_subject__Kd6tm",body:"Messages_body__BJTGn",the_footer:"Messages_the_footer___AaRz",send:"Messages_send__XLADj"}},3398:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return c}});var i=a(5893),n=a(4687),t={src:"/_next/static/media/new_email.0b20bfc9.png",height:175,width:190,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAQAAACfUMTVAAAAgklEQVR42gF3AIj/AOIH+kv8XPxp/GX8W/s3/wAA+TL86vyE/UP8S/yy+8j/AAD8QfqA+l36Zvtx+lH5mPQOAPtF+mT8APo9+yL/APVD6wMA+0L7mv0v/S/pBPuG+2j/AAD1C/xr/Hr8dfYq/LP8p+0LAPcA/QD+AP0A+QD0HPET+ADbwUXOsP330QAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7},_=a(7294),A=a(905),c=function(e){let{children:s,user_id:a}=e,[c,l]=(0,_.useState)(""),[r,d]=(0,_.useState)(""),[o,h]=(0,_.useState)(null),[m,g]=(0,_.useState)(null),[u,j]=(0,_.useState)((0,i.jsx)("div",{className:n.chat})),x=()=>{j((0,i.jsx)("div",{className:n.chat}))},M=e=>{let{NewEmailWindow:s}=e,[a,t]=(0,_.useState)(""),[A,c]=(0,_.useState)(""),[l,r]=(0,_.useState)("");return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{id:"".concat(n.new_form_container," ").concat(n.email),children:s}),(0,i.jsx)("div",{id:n.new_form_container,children:(0,i.jsxs)("div",{className:n.container,children:[(0,i.jsxs)("div",{className:n.the_head,children:[(0,i.jsx)("article",{children:(0,i.jsx)("h4",{children:"New Email"})}),(0,i.jsx)("aside",{children:(0,i.jsx)("button",{onClick:x,id:n.close_button,children:(0,i.jsx)("i",{class:"fa fa-window-close"})})})]}),(0,i.jsxs)("div",{className:n.recipient,children:["Recipients:"," ",(0,i.jsx)("input",{type:"text",value:a,onChange:e=>t(e.target.value),placeholder:"Enter email here"})]}),(0,i.jsxs)("div",{className:n.the_subject,children:["Subject:"," ",(0,i.jsx)("input",{type:"text",value:A,onChange:e=>c(e.target.value),placeholder:"Subject"})]}),(0,i.jsxs)("div",{className:n.body,children:[" ",(0,i.jsx)("textarea",{id:n.body,value:l,onChange:e=>r(e.target.value),placeholder:"The Body"})]}),(0,i.jsx)("div",{className:n.the_footer,children:(0,i.jsxs)("button",{onClick:()=>{},id:n.send,children:["Send",(0,i.jsx)("i",{class:"material-icons",children:"send"})]})})]})})]})};return(0,i.jsxs)("div",{id:n.Messages,children:[(0,i.jsxs)("nav",{children:[(0,i.jsxs)("ul",{className:n.ul1,children:[A.Xy.find(e=>"Emails"===e.name)&&(0,i.jsx)("a",{href:A.Xy.find(e=>"Emails"===e.name).path,children:(0,i.jsxs)("li",{children:[(0,i.jsx)("i",{className:"material-icons",children:"email"}),"EMAIL"]})}),A.Xy.find(e=>"SMS"===e.name)&&(0,i.jsx)("a",{href:A.Xy.find(e=>"SMS"===e.name).path,children:(0,i.jsxs)("li",{children:[(0,i.jsx)("i",{className:"material-icons",children:"textsms"}),"CONTACTS"]})})]}),(0,i.jsx)("ul",{className:n.ul2,children:(0,i.jsx)("aside",{children:(0,i.jsx)("li",{children:A.Xy.find(e=>"NewEmail"===e.name)&&(0,i.jsx)("a",{href:A.Xy.find(e=>"NewEmail"===e.name).path,children:(0,i.jsx)("button",{onClick:()=>{h(null),j((0,i.jsx)(M,{NewEmailWindow:u}))},children:(0,i.jsx)("img",{src:t,alt:"new_email"})})})})})})]}),(0,i.jsx)("section",{children:_.Children.map(s,e=>_.cloneElement(e,{searchQuery:r,setSearchQuery:d,activeCONTACT:m,setActiveCONTACT:g}))})]})}},8806:function(e,s,a){"use strict";a.r(s);var i=a(5893),n=a(7294),t=a(9845),_=a(2850),A=a(3398);s.default=e=>{let{all_messages:s,user_id:a}=e,[c,l]=(0,n.useState)(null),[r,d]=(0,n.useState)([]),[o,h]=(0,n.useState)();(0,n.useEffect)(()=>{if(s&&s.length>0&&a){let e=s.find(e=>String(a)===String(e.userid));if(e&&e.Email_Messages){let s=Object.entries(e.Email_Messages).flatMap(e=>{let[s,a]=e;return a.map(e=>({type:s,...e}))}),a=o?s.filter(e=>"inbox"===e.type?e.sender.name.toLowerCase().includes(o.toLowerCase()):e.receiver.name.toLowerCase().includes(o.toLowerCase())):s;d(a)}}},[s,a,o]);let m=e=>{l(e),console.log("setting the Email: ",e)},g=e=>new Date(e);return(0,i.jsx)(A.default,{children:(0,i.jsxs)("div",{id:t.Email,children:[(0,i.jsxs)("div",{id:t.message_board,children:[(0,i.jsxs)("div",{className:t.search_bar,children:[(0,i.jsx)("input",{type:"text",placeholder:"Search Email",value:o,onChange:e=>h(e.target.value)}),(0,i.jsx)("button",{onClick:()=>h(""),children:"Clear"})]}),r&&r.length>0&&r.map(e=>(0,i.jsxs)("ul",{className:"".concat(t.email_item," ").concat(c&&c.id===e.id?"active":""),onClick:()=>m(e),children:[(0,i.jsx)("li",{className:t.sender,children:"sent"===e.type?e.receiver.s_email:e.sender.s_email}),(0,i.jsx)("li",{className:t.content,children:e.body}),(0,i.jsxs)("li",{className:t.timestamp,children:[e.type," - "," ",g(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).replace(/,/g,"")]})]}))]}),(0,i.jsx)("div",{id:t.chat_window,children:c&&Object.keys(c).length>0&&(0,i.jsxs)("div",{className:t.chat,children:[(0,i.jsx)("div",{className:t.the_head,children:(0,i.jsxs)("span",{children:[" ",c.type," "]})}),(0,i.jsxs)("div",{className:t.email_view,children:[(0,i.jsxs)("article",{children:[(0,i.jsx)("img",{src:_.Z,alt:"user"}),"sent"===c.type?"Me":c.receiver.name," <","sent"===c.type?c.receiver.s_email:c.sender.s_email,">"]}),(0,i.jsxs)("aside",{children:[g(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," | "," ",g(c.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).replace(/,/g,""),",",(0,i.jsx)("p",{children:(0,i.jsx)("i",{className:"material-icons",children:"delete"})})]}),(0,i.jsxs)("div",{className:"".concat(t.the_message," ").concat(t.email),children:[(0,i.jsx)("h3",{children:c.subject}),(0,i.jsx)("div",{className:"".concat(t.body," ").concat(t.email),children:c.body})]})]})]})})]})})}}},function(e){e.O(0,[410,774,888,179],function(){return e(e.s=4023)}),_N_E=e.O()}]);