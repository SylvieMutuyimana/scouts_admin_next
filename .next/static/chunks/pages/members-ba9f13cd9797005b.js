(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{6604:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members",function(){return l(4955)}])},5653:function(e){e.exports={Profile:"Members_MyProfile_Profile__xkE9_",Members:"Members_MyProfile_Members__faLoO",search_bar:"Members_MyProfile_search_bar__KYpxE",add:"Members_MyProfile_add__GxgmH",inside:"Members_MyProfile_inside__29hEN",item:"Members_MyProfile_item__vaAe3",activities_container:"Members_MyProfile_activities_container__HYjZ_",provincehead:"Members_MyProfile_provincehead__rsKYm",activities_grid:"Members_MyProfile_activities_grid__Sox5p",activity_card:"Members_MyProfile_activity_card__tG7iP",details:"Members_MyProfile_details__C7lJd",provinces:"Members_MyProfile_provinces__Ou7rz",districts:"Members_MyProfile_districts__KGygq",sectors:"Members_MyProfile_sectors__hiLCf",activity_card_buttons:"Members_MyProfile_activity_card_buttons__pBJLd",Name:"Members_MyProfile_Name___f5bg",Action:"Members_MyProfile_Action__xrn_B",view:"Members_MyProfile_view__4GXEO",email:"Members_MyProfile_email__ft2UH",Address:"Members_MyProfile_Address__2LLns",District:"Members_MyProfile_District__HWEEB",Tenure:"Members_MyProfile_Tenure__Tf90z",Author:"Members_MyProfile_Author__lY1Kc",show:"Members_MyProfile_show__dB2vr",Occupation:"Members_MyProfile_Occupation__q_IHk",Age:"Members_MyProfile_Age__6QEj6"}},4955:function(e,s,l){"use strict";l.r(s);var t=l(5893),c=l(5653),i=l(7294),n=l(1163),r=l(905);s.default=e=>{var s,l;let{all_members:a,districts_provinces:d}=e,o=(0,n.useRouter)(),[u,h]=(0,i.useState)(),[m,x]=(0,i.useState)();(0,i.useEffect)(()=>{h(d)},[d]),(0,i.useEffect)(()=>{x(a)},[a]),console.log("districts_provinces: ",d),console.log("rwandaProvinces: ",u),console.log("all_members: ",a),console.log("allmembers: ",m);let[j,v]=(0,i.useState)(""),[p,_]=(0,i.useState)({province:null,district:null,sector:null,cell:null,image:null}),[f,g]=(0,i.useState)({all:null,cell:null,selected:null,theScouts:null}),[b,N]=(0,i.useState)({all:null,cell:null,selected:null,theAdults:null}),[M,y]=(0,i.useState)({scouts:null,adults:null}),[S,A]=(0,i.useState)({adults:!1,scouts:!1}),[P,k]=(0,i.useState)({adults:!1,scouts:!1}),[w,C]=(0,i.useState)({scout:"",adult:""}),[O,E]=(0,i.useState)([]),[L,T]=(0,i.useState)([]),I=e=>{e.scout?C(s=>({...s,scout:e.scout})):e.adult&&C(s=>({...s,adult:e.adult}))},F={Abatoni:{min:6,max:12},Inyesha:{min:13,max:16},Abahizi:{min:17,max:20},Ingenzi:{min:21,max:24},Adults:{min:25,max:100}};(0,i.useEffect)(()=>{if(p.province&&p.district&&p.sector&&p.cell,p.cell){var e,s,l,t,c,i;let n=null===(l=m.adults[p.province])||void 0===l?void 0:null===(s=l[p.district])||void 0===s?void 0:null===(e=s[p.sector])||void 0===e?void 0:e[p.cell],r=null===(i=m.scouts[p.province])||void 0===i?void 0:null===(c=i[p.district])||void 0===c?void 0:null===(t=c[p.sector])||void 0===t?void 0:t[p.cell];void 0!==n&&n.length>0?N(e=>({...e,all:n,cell:n,selected:n.slice(0,M.adults)})):N(e=>({...e,all:null,cell:null,selected:null})),void 0!==r&&r.length>0?g(e=>({...e,all:r,cell:r,selected:r.slice(0,M.scouts)})):g(e=>({...e,all:null,sector:null,selected:null}))}},[p.cell,p.sector,p.district,p.province,M.adults,M.scouts]),(0,i.useEffect)(()=>{if(w.adult&&0!==b.cell.length){let e;e=""===w.adult?b.cell:b.cell.filter(e=>e.department===w.adult),w.adult&&e?N(s=>({...s,selected:e})):(N(e=>({...e,selected:null})),T(e))}},[w.adult,b.cell]),(0,i.useEffect)(()=>{if(w.scout&&0!==f.cell.length){let e;if(""===w.scout)e=f.cell;else{let{min:s,max:l}=F[w.scout]||{min:0,max:100};e=f.cell.filter(e=>e.age>=s&&e.age<=l)}w.scout&&e?g(s=>({...s,selected:e})):(g(e=>({...e,selected:null})),E(e))}},[w.scout,f.cell]);let D=()=>{null!==p.cell?_(e=>({...e,cell:null})):null!==p.sector?_(e=>({...e,sector:null})):(null!==p.province||null!==p.district)&&_(e=>({...e,province:null,district:null})),g(e=>({...e,selected:null}))},z=e=>{let s=(e,s)=>{e.all.filter(e=>e.name!==s)};e.scout?g(l=>({...l,all:s(f,e.scout),sector:s(f,e.scout),selected:f.cell})):e.adult&&N(l=>({...l,all:s(b,e.adult),sector:s(b,e.adult),selected:b.cell}))},X=e=>{let s="scouts"===e?"numScouts":"numAdults",l=parseInt(document.getElementsByName(s)[0].value,10);((e,s,l)=>{if(console.log("array: ",e.length,": \n",e),console.log("type = ",l),s>=0&&s<=e.length){let t=e.slice(0,s);k(e=>({...e,scouts:null,adults:null})),"scouts"===l?(g(e=>({...e,selected:t})),y(e=>({...e,scouts:s}))):(N(e=>({...e,selected:t})),y(e=>({...e,adults:s})))}else{let s="Please enter a number between 1 and ".concat(e.length);"scouts"===l?(A(e=>({...e,scouts:!0})),k(e=>({...e,scouts:s}))):(A(e=>({...e,adults:!0})),k(e=>({...e,adults:s})))}})((e=>{if("scouts"===e){let e;if(!w.scout||""===w.scout)return f.cell;{console.log("choice: ",w.scout),console.log("scoutsInfo.cell: ",f.cell);let{min:s,max:l}=F[w.scout]||{min:0,max:100};return console.log("groupScouts: ",e=f.cell.filter(e=>e.age>=s&&e.age<=l)),g(s=>({...s,selected:e})),e}}if("adults"===e){let e;return w.adult&&""!==w.adult?(e=b.cell.filter(e=>e.department===w.adult),N(s=>({...s,selected:e})),e):b.cell}})(e),l,e)},B=e=>{if(k(e=>({...e,scouts:null,adults:null})),"allScouts"===e||"lessScouts"===e){let s;if(w.adult&&""!==w.adult){let{min:e,max:l}=F[w.scout]||{min:0,max:100};s=f.cell.filter(s=>s.age>=e&&s.age<=l)}else s=f.cell;"lessScouts"===e?(y(e=>({...e,scouts:2})),g(e=>({...e,selected:s.slice(0,2)}))):(y(e=>({...e,scouts:s.length})),g(e=>({...e,selected:s})))}else if("allAdults"===e||"lessAdults"===e){let s;s=w.adult&&""!==w.adult?b.cell.filter(e=>e.department===w.adult):b.cell,"lessAdults"===e?(y(e=>({...e,adults:2})),N(e=>({...e,selected:s.slice(0,2)}))):(y(e=>({...e,adults:s.length})),N(e=>({...e,selected:s})))}},G=()=>{g(e=>({...e,selected:null})),N(e=>({...e,selected:null})),_(e=>({...e,province:null,district:null,sector:null,cell:null}))},H=(e,s,l,t,c)=>{_(i=>({...i,province:e,district:s,sector:l,cell:t,image:c})),null===t&&y(e=>({...e,scouts:5,adults:5}))},[K,Y]=(0,i.useState)(!1),W=e=>{Y(!K),("Scout"===e||"Adult"===e)&&o.push(r.Xy.find(s=>s.name==="Add".concat(e)).path)};return(0,t.jsxs)("div",{id:c.Members,children:[(0,t.jsxs)("section",{children:[p.province&&p.district&&p.sector&&p.cell&&(0,t.jsx)("h4",{style:{textAlign:"left",width:"98%",marginLeft:"1%"},children:(0,t.jsx)("u",{children:"Scouts "})}),(0,t.jsxs)("nav",{children:[(0,t.jsx)("article",{children:f.selected&&f.selected.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{htmlFor:"numScouts",children:"Show"}),(0,t.jsx)("input",{type:"number",id:"numScouts",name:"numScouts",min:"1",max:f.all,defaultValue:M.scouts}),(0,t.jsx)("button",{onClick:()=>X("scouts"),children:"Preview"}),S.scouts&&(0,t.jsx)("span",{className:c.error,children:P.scouts})]}):p.district?null:(0,t.jsxs)("div",{className:c.search_bar,children:[(0,t.jsx)("input",{type:"text",placeholder:"Search province or district",value:j,onChange:e=>{let{value:s}=e.target;if(v(s),""!=s){let e={};Object.entries(d).map(l=>{let[t,c]=l;t.toLowerCase().startsWith(s.toLowerCase())&&(e[t]=c)}),h(e),0===Object.keys(e).length&&(Object.entries(d).map(l=>{let[t,c]=l;Object.entries(c.districts).map(l=>{let[i,n]=l;i.toLowerCase().startsWith(s.toLowerCase())&&([].push(i),e[t]=c)})}),h(e))}else h(d)}}),(0,t.jsx)("button",{onClick:()=>v(""),children:"Clear"})]})}),(0,t.jsx)("aside",{children:(0,t.jsxs)("button",{onClick:W,children:[(0,t.jsx)("i",{className:"material-icons",children:"add"})," Add Member",K&&(0,t.jsxs)("ul",{className:c.add,children:[(0,t.jsx)("li",{className:c.item,onClick:()=>W("Scout"),children:"Scout"}),(0,t.jsx)("li",{className:c.item,onClick:()=>W("Adult"),children:"Adult"})]})]})})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("article",{children:[p.province&&p.district&&!p.sector&&!p.cell&&(0,t.jsx)("button",{className:c.back,onClick:D,children:(0,t.jsx)("i",{class:"fa fa-arrow-left"})}),p.province&&p.district&&p.sector&&!p.cell&&(0,t.jsx)("button",{className:c.back,onClick:D,children:(0,t.jsx)("i",{class:"fa fa-arrow-left"})}),p.province&&p.district&&p.sector&&p.cell&&(0,t.jsx)("button",{className:c.back,onClick:D,children:(0,t.jsx)("i",{class:"fa fa-arrow-left"})}),f.selected&&p.sector&&(0,t.jsxs)("select",{value:w.scout,onChange:e=>I({scout:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"Group"}),(0,t.jsx)("option",{value:"Abatoni",children:"Abatoni"}),(0,t.jsx)("option",{value:"Inyesha",children:"Inyesha"}),(0,t.jsx)("option",{value:"Abahizi",children:"Abahizi"}),(0,t.jsx)("option",{value:"Ingenzi",children:"Ingenzi"}),(0,t.jsx)("option",{value:"Adults",children:"Adults"})]})]}),(0,t.jsx)("aside",{children:f.selected&&f.selected.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Total: ",f.selected.length]}),(0,t.jsx)("button",{className:c.show,onClick:()=>B("allScouts"),children:"Show All"}),(0,t.jsx)("button",{className:c.show,onClick:()=>B("lessScouts"),children:"Show Less"}),(0,t.jsx)("button",{className:c.reset,onClick:G,children:"Starting Page"})]})}),(0,t.jsx)("hr",{}),!p.cell&&(0,t.jsx)("div",{className:c.activities_container,children:p.district?p.sector?p.cell?void 0:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h4",{className:c.provincehead,children:["District: ",p.district]}),(0,t.jsxs)("h5",{className:c.provincehead,children:["Sector: ",p.sector]}),(0,t.jsx)("div",{className:c.activities_grid,children:Object.entries((null===(l=m.adults[p.province])||void 0===l?void 0:null===(s=l[p.district])||void 0===s?void 0:s[p.sector])||{}).map(e=>{var s,l,i;let[n,r]=e,a=r.length,d=(null===(i=m.scouts[p.province])||void 0===i?void 0:null===(l=i[p.district])||void 0===l?void 0:null===(s=l[p.sector])||void 0===s?void 0:s[n])||{},o=d.length;return(0,t.jsxs)("div",{className:"".concat(c.activity_card," ").concat(c.districts),style:{backgroundImage:"url(".concat(p.image,")")},onClick:()=>H(p.province,p.district,p.sector,n,p.image),children:[(0,t.jsxs)("h3",{children:[" ",n," "]}),(0,t.jsxs)("div",{className:c.details,children:[(0,t.jsxs)("p",{children:["Adults: ",a]}),(0,t.jsxs)("p",{children:["Scouts: ",o]})]})]},n)})})]}):(0,t.jsx)(t.Fragment,{children:!p.sector&&p.district&&p.province&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h3",{className:c.provincehead,children:["District: ",p.district]}),(0,t.jsx)("div",{className:c.activities_grid,children:Object.entries(u[p.province].districts[p.district]).map(e=>{var s,l,i,n;let[r,a]=e,d=Object.values((null===(l=m.adults[p.province])||void 0===l?void 0:null===(s=l[p.district])||void 0===s?void 0:s[r])||{}).map(e=>e.length).reduce((e,s)=>e+s,0),o=Object.values((null===(n=m.scouts[p.province])||void 0===n?void 0:null===(i=n[p.district])||void 0===i?void 0:i[r])||{}).map(e=>e.length).reduce((e,s)=>e+s,0);return(0,t.jsxs)("div",{className:"".concat(c.activity_card," ").concat(c.districts),style:{backgroundImage:"url(".concat(p.image,")")},onClick:()=>H(p.province,p.district,r,null,p.image),children:[(0,t.jsxs)("h3",{children:[" ",r," "]}),(0,t.jsxs)("div",{className:c.details,children:[(0,t.jsxs)("p",{children:["Cells: ",Object.keys(a).length]}),(0,t.jsxs)("p",{children:["Members: ",d+o]})]})]},r)})},p.province)]})}):(0,t.jsx)(t.Fragment,{children:u&&!p.district&&!p.province&&Object.entries(u).map(e=>{let[s,l]=e;return(0,t.jsxs)(t.Fragment,{children:["Kigali"!==s?(0,t.jsx)("br",{}):null,(0,t.jsxs)("h3",{className:c.provincehead,children:["Province: ",s]}),(0,t.jsx)("div",{className:c.activities_grid,children:Object.entries(l.districts).map(e=>{var i,n,r,a;let[d,o]=e,u=Object.values((null==m?void 0:null===(n=m.adults)||void 0===n?void 0:null===(i=n[s])||void 0===i?void 0:i[d])||{}).map(e=>Object.values(e)).flat().map(e=>e.length).reduce((e,s)=>e+s,0),h=Object.values((null==m?void 0:null===(a=m.scouts)||void 0===a?void 0:null===(r=a[s])||void 0===r?void 0:r[d])||{}).map(e=>Object.values(e)).flat().map(e=>e.length).reduce((e,s)=>e+s,0);return(0,t.jsxs)("div",{className:"".concat(c.activity_card," ").concat(c.districts),style:{backgroundImage:"url(".concat(l.image,")")},onClick:()=>H(s,d,null,null,l.image),children:[(0,t.jsxs)("h3",{children:[" ",d," "]}),(0,t.jsxs)("div",{className:c.details,children:[(0,t.jsxs)("p",{children:["Sectors: ",Object.keys(o).length]}),(0,t.jsxs)("p",{children:["Members: ",u+h," "]})]})]},d)})},s)]})})})}),p.province&&p.district&&p.sector&&p.cell&&(f.selected&&0===f.selected.length?(0,t.jsxs)("div",{children:[w.scout&&(0,t.jsxs)("p",{children:["There are no ",w.scout," scouts in the selected area"]}),!w.scout&&(0,t.jsx)("p",{children:"There are no scouts in the selected area"}),(0,t.jsxs)("p",{children:["Province : ",p.province]}),(0,t.jsxs)("p",{children:["District : ",p.district]}),(0,t.jsxs)("p",{children:["Sector : ",p.sector]})]}):f.selected&&0!==f.selected.length?(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:m.scoutsheaders.map(e=>(0,t.jsx)("th",{className:c[e],children:e},e))})}),(0,t.jsx)("tbody",{children:f.selected.slice(0,M.scouts).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{className:c.Name,children:[(0,t.jsx)("article",{children:(0,t.jsx)("img",{width:20,height:20,src:e.image,alt:e.name})}),(0,t.jsxs)("aside",{children:[(0,t.jsx)("p",{children:e.name}),(0,t.jsx)("p",{children:e.gender})]})]}),(0,t.jsx)("td",{className:c.Age,children:e.age}),(0,t.jsxs)("td",{className:c.Address,children:[(0,t.jsx)("p",{children:p.sector}),(0,t.jsx)("p",{children:e.street})]}),(0,t.jsxs)("td",{className:c.District,children:[(0,t.jsx)("p",{children:p.district}),(0,t.jsx)("p",{children:p.province})]}),(0,t.jsx)("td",{className:c.Occupation,children:e.occupation}),(0,t.jsxs)("td",{className:c.Contact,children:[(0,t.jsx)("p",{children:e.contact.phone}),(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:"mailto:".concat(e.contact.email),children:e.contact.email})})]}),(0,t.jsx)("td",{className:c.Tenure,children:e.tenure}),(0,t.jsxs)("td",{className:c.Action,children:[r.Xy.find(e=>"SMS"===e.name)&&(0,t.jsx)("a",{href:r.Xy.find(e=>"SMS"===e.name).path,children:(0,t.jsx)("i",{class:"material-icons",children:"chat"})}),(0,t.jsx)("a",{href:"#",onClick:()=>z({scout:e.name}),children:(0,t.jsx)("i",{className:"material-icons",children:"delete"})})]})]},e))})]}):null)]})]}),(0,t.jsx)("br",{}),p.province&&p.district&&p.sector&&p.cell&&(0,t.jsxs)("section",{children:[(0,t.jsx)("br",{}),(0,t.jsx)("h4",{style:{textAlign:"left",width:"98%",marginLeft:"1%"},children:(0,t.jsx)("u",{children:"Adults "})}),(0,t.jsx)("nav",{children:b.selected&&b.selected.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("article",{children:[(0,t.jsx)("label",{htmlFor:"numAdults",children:"Show"}),(0,t.jsx)("input",{type:"number",id:"numAdults",name:"numAdults",min:"1",max:b.all,defaultValue:M.adults}),(0,t.jsx)("button",{onClick:()=>X("adults"),children:"Preview"}),S.adults&&(0,t.jsx)("span",{className:c.error,children:P.adults})]}),(0,t.jsx)("aside",{style:{height:"0px",display:"none"}})]})}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("article",{children:[p.province&&p.district&&!p.sector&&!p.cell&&(0,t.jsx)("button",{className:c.back,onClick:D,children:(0,t.jsx)("i",{class:"fa fa-arrow-left"})}),p.province&&p.district&&p.sector&&!p.cell&&(0,t.jsx)("button",{className:c.back,onClick:D,children:(0,t.jsx)("i",{class:"fa fa-arrow-left"})}),p.province&&p.district&&p.sector&&p.cell&&(0,t.jsx)("button",{className:c.back,onClick:D,children:(0,t.jsx)("i",{class:"fa fa-arrow-left"})}),b.selected&&p.sector&&(0,t.jsxs)("select",{value:w.scout,onChange:e=>I({adult:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"Department"}),(0,t.jsx)("option",{value:"Administration",children:"Administration"}),(0,t.jsx)("option",{value:"Education",children:"Education"}),(0,t.jsx)("option",{value:"Professionals",children:"Professionals"})]})]}),(0,t.jsx)("aside",{children:b.selected&&b.selected.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Total: ",b.selected.length]}),(0,t.jsx)("button",{className:c.show,onClick:()=>B("allAdults"),children:"Show All"}),(0,t.jsx)("button",{className:c.show,onClick:()=>B("lessAdults"),children:"Show Less"}),(0,t.jsx)("button",{className:c.reset,onClick:G,children:"Starting Page"})]})}),(0,t.jsx)("hr",{}),p.province&&p.district&&p.sector&&p.cell&&(p.province&&p.district&&p.sector&&b.selected&&0===b.selected.length?(0,t.jsxs)("div",{children:[w.adult&&(0,t.jsxs)("p",{children:["There are no ",w.adult," adults in the selected area"]}),!w.adult&&(0,t.jsx)("p",{children:"There are no adults in the selected area"}),(0,t.jsxs)("p",{children:["Province : ",p.province]}),(0,t.jsxs)("p",{children:["District : ",p.district]}),(0,t.jsxs)("p",{children:["Sector : ",p.sector]})]}):b.selected&&0!==b.selected.length?(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:m.adultsheaders.map(e=>(0,t.jsx)("th",{className:c[e],children:e},e))})}),(0,t.jsx)("tbody",{children:b.selected.slice(0,M.adults).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{className:c.Name,children:[(0,t.jsx)("article",{children:(0,t.jsx)("img",{width:20,height:20,src:e.image,alt:e.name})}),(0,t.jsxs)("aside",{children:[(0,t.jsx)("p",{children:e.name}),(0,t.jsx)("p",{children:e.gender})]})]}),(0,t.jsx)("td",{className:c.Age,children:e.age}),(0,t.jsxs)("td",{className:c.Address,children:[(0,t.jsx)("p",{children:p.sector}),(0,t.jsx)("p",{children:e.street})]}),(0,t.jsxs)("td",{className:c.District,children:[(0,t.jsx)("p",{children:p.district}),(0,t.jsx)("p",{children:p.province})]}),(0,t.jsx)("td",{className:c.Role,children:e.role}),(0,t.jsxs)("td",{className:c.Contact,children:[(0,t.jsx)("p",{children:e.contact.phone}),(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:"mailto:".concat(e.contact.email),children:e.contact.email})})]}),(0,t.jsx)("td",{className:c.Tenure,children:e.tenure}),(0,t.jsxs)("td",{className:c.Action,children:[r.Xy.find(e=>"SMS"===e.name)&&(0,t.jsx)("a",{href:r.Xy.find(e=>"SMS"===e.name).path,children:(0,t.jsx)("i",{class:"material-icons",children:"chat"})}),(0,t.jsx)("a",{href:"#",onClick:()=>z({adult:e.name}),children:(0,t.jsx)("i",{className:"material-icons",children:"delete"})})]})]},e))})]}):null)]})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6604)}),_N_E=e.O()}]);