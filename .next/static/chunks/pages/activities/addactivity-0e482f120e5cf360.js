(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{5226:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/activities/addactivity",function(){return a(1657)}])},1338:function(e){e.exports={add_report:"Add_pages_add_report__Yq1zu",add_member:"Add_pages_add_member__hC0jr",add_volunteer:"Add_pages_add_volunteer__8kK0A",add_partner:"Add_pages_add_partner__r_XQ5",add_activity:"Add_pages_add_activity__GEITm",back:"Add_pages_back__XKclf",add:"Add_pages_add__JXcWO",clear:"Add_pages_clear__WArFl",left:"Add_pages_left__l9jeb",right:"Add_pages_right__9TMvx",district:"Add_pages_district__OD9kR",province:"Add_pages_province__VYhQB",title:"Add_pages_title__6VH9j",contact:"Add_pages_contact__1v8UL",start:"Add_pages_start__daZFi",end:"Add_pages_end__03aEj",adult:"Add_pages_adult__ehRxl",scout:"Add_pages_scout__j3h9f",checkbox_grid:"Add_pages_checkbox_grid__UYxaV",checkbox_item:"Add_pages_checkbox_item__OzNUb",new_partner:"Add_pages_new_partner__P7le7"}},1657:function(e,t,a){"use strict";a.r(t);var n=a(5893),i=a(7294),r=a(1338),l=a(1664),c=a(1163);t.default=function(e){let{all_events:t,districts_provinces:a}=e,s=(0,c.useRouter)(),[o,d]=(0,i.useState)(),[m,u]=(0,i.useState)();(0,i.useEffect)(()=>{d(a)},[a]),(0,i.useEffect)(()=>{u(t)},[t]);let[p,_]=(0,i.useState)([]),[h,x]=(0,i.useState)({title:"",image:null,location:{province:"",district:"",sector:"",place:""},date:"",time:{start:"",end:""},organiser:{name:"",title:"",contact:"",email:""},volunteers:[{name:"",contact:"",email:""}],RSVP:"",maximum_capacity:"",form:""}),g=e=>{let{name:t,value:a}=e.target;x(e=>({...e,[t]:a}))},j=e=>{let{name:t,value:a}=e.target;x(e=>({...e,time:{...e.time,[t]:a}}))},v=e=>{let{name:t,value:a}=e.target;"province"===t?(x(e=>({...e,location:{...e.location,province:a,district:""}})),_(o[a])):"district"===t?x(e=>({...e,location:{...e.location,district:a}})):x(e=>({...e,location:{...e.location,[t]:a}}))},f=e=>{let{name:t,value:a}=e.target;x(e=>({...e,organiser:{...e.organiser,[t]:a}}))},[b,y]=(0,i.useState)(1),A=e=>{let{name:t,value:a}=e.target,[n,i]=t.split("");!(i>1)&&2!==b&&(x(e=>({...e,volunteers:e.volunteers.map((e,t)=>t!==i?e:{...e,["n"===n?"name":"c"===n?"contact":"email"]:a})})),b<2&&y(b+1))},C=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=C.current,t=document.getElementsByTagName("input");return e.addEventListener("click",function(){for(let e=0;e<t.length;e++)t[e].value=""}),()=>{e.removeEventListener("click",function(){for(let e=0;e<t.length;e++)t[e].value=""})}},[]);let k=e=>{x(t=>({...t,volunteers:t.volunteers.filter((t,a)=>a!==e)})),y(b-1)};return(0,n.jsxs)("section",{id:r.add_activity,children:[(0,n.jsxs)("nav",{children:[(0,n.jsx)(l,{href:"/Activities",children:(0,n.jsx)("button",{className:r.back,children:(0,n.jsx)("i",{class:"fa fa-arrow-left"})})}),(0,n.jsx)("button",{className:r.clear,type:"button",ref:C,children:"Clear"})]}),(0,n.jsxs)("form",{onSubmit:e=>{switch(e.preventDefault(),!0){case""===h.title.trim():alert("Missing title");return;case""===h.organiser.name.trim()||""===h.organiser.contact.trim()||""===h.organiser.email.trim():alert("Missing organiser");return;case""===h.form.trim():alert("Missing participation form");return;case""===h.location.province.trim()||""===h.location.district.trim()||""===h.location.sector.trim()||""===h.location.place.trim():alert("Missing address");return;case""===h.maximum_capacity.trim():alert("Missing maximum capacity value");return;case""===h.date.trim():alert("Missing date");return;case""===h.time.start.trim()||""===h.time.end.trim():alert("Missing time");return;case null===h.image:alert("Image missing");return}let t={...h};m.push(t),x({title:"",image:null,location:{province:"",district:"",sector:"",place:""},date:"",time:{start:"",end:""},organiser:{name:"",title:"",contact:"",email:""},volunteers:[{name:"",contact:"",email:""}],RSVP:"",maximum_capacity:"",form:""}),s.push("/Activities")},encType:"multipart/form-data",children:[(0,n.jsx)("h3",{children:"Add Activity"}),(0,n.jsxs)("article",{children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("p",{children:"Event Poster:"}),(0,n.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:function(e){let t=e.target.files[0],a=new FileReader;a.onloadend=()=>{x(e=>({...e,image:a.result}))},t&&a.readAsDataURL(t)}})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("p",{children:"Event Name:"}),(0,n.jsx)("input",{type:"text",name:"title",value:h.title,onChange:g,placeholder:"Enter title"})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("p",{children:"Organiser:"}),(0,n.jsx)("input",{type:"text",name:"name",value:h.organiser.name,onChange:f,placeholder:"Name"}),(0,n.jsx)("input",{type:"number",name:"contact",id:"contact",value:h.organiser.contact,onChange:f,placeholder:"Phone number"}),(0,n.jsxs)("select",{name:"title",id:"title",value:h.organiser.title,onChange:f,children:[(0,n.jsx)("option",{value:"",children:"Title"}),(0,n.jsx)("option",{value:"Admin",children:"Admin"}),(0,n.jsx)("option",{value:"Volunteer",children:"Volunteer"}),(0,n.jsx)("option",{value:"Scout",children:"Scout"})]}),(0,n.jsx)("input",{type:"email",name:"email",value:h.organiser.email,onChange:f,placeholder:"Email"})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("p",{children:"Participation Link:"}),(0,n.jsx)("input",{type:"text",name:"form",value:h.form,onChange:g,placeholder:"Enter link"})]})]}),(0,n.jsxs)("aside",{children:[[...Array(b)].map((e,t)=>(0,n.jsxs)("label",{children:[(0,n.jsxs)("p",{children:[(0,n.jsxs)("span",{children:["Volunteer ",t+1,":"]}),(0,n.jsx)("span",{onClick:()=>k(t),children:(0,n.jsx)("i",{className:r["fas fa-trash-alt"]})})]}),(0,n.jsx)("input",{type:"text",name:"name".concat(t),value:h.volunteers["name".concat(t)],onChange:A,placeholder:"Name"}),(0,n.jsx)("input",{type:"number",name:"contact".concat(t),value:h.volunteers["contact".concat(t)],onChange:A,placeholder:"Phone Number"}),(0,n.jsx)("input",{type:"email",name:"email".concat(t),value:h.volunteers["email".concat(t)],onChange:A,placeholder:"Email"})]},t)),b<3&&(0,n.jsx)("button",{id:r.add,onClick:()=>y(b+1),children:"Add Volunteer"})]}),(0,n.jsxs)("aside",{children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("p",{children:"Location:"}),(0,n.jsxs)("select",{name:"province",id:r.province,value:h.location.province,onChange:v,children:[(0,n.jsx)("option",{value:"",children:"Select province"}),o&&o.length>0&&Object.keys(o).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsxs)("select",{name:"district",id:r.district,value:h.location.district,onChange:v,children:[(0,n.jsx)("option",{value:"",children:"Select district"}),p.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsx)("input",{type:"text",name:"sector",value:h.location.sector,onChange:v,placeholder:"Sector"}),(0,n.jsx)("input",{type:"text",name:"place",value:h.location.place,onChange:v,placeholder:"Place"})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("p",{children:"Maximum Capacity:"}),(0,n.jsx)("input",{type:"number",name:"maximum_capacity",value:h.maximum_capacity,onChange:g,min:"1",placeholder:"Maximum capacity"})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("p",{children:"Date:"}),(0,n.jsx)("input",{type:"date",id:r.date,name:"date",value:h.date,onChange:g})]}),(0,n.jsxs)("label",{id:r.start,children:[(0,n.jsx)("p",{children:"Start"}),(0,n.jsx)("input",{type:"time",name:"start",value:h.time.start,onChange:j})]}),(0,n.jsxs)("label",{id:r.end,children:[(0,n.jsx)("p",{children:"End"}),(0,n.jsx)("input",{type:"time",name:"end",value:h.time.end,onChange:j})]})]}),(0,n.jsx)("footer",{children:(0,n.jsx)("button",{type:"submit",children:"Add Activity"})})]})]})}}},function(e){e.O(0,[342,774,888,179],function(){return e(e.s=5226)}),_N_E=e.O()}]);