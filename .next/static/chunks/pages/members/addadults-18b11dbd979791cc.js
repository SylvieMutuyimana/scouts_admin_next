(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{3626:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members/addadults",function(){return n(6177)}])},1338:function(e){e.exports={add_report:"Add_pages_add_report__Yq1zu",add_member:"Add_pages_add_member__hC0jr",add_volunteer:"Add_pages_add_volunteer__8kK0A",add_partner:"Add_pages_add_partner__r_XQ5",add_activity:"Add_pages_add_activity__GEITm",back:"Add_pages_back__XKclf",add:"Add_pages_add__JXcWO",clear:"Add_pages_clear__WArFl",left:"Add_pages_left__l9jeb",right:"Add_pages_right__9TMvx",district:"Add_pages_district__OD9kR",province:"Add_pages_province__VYhQB",title:"Add_pages_title__6VH9j",contact:"Add_pages_contact__1v8UL",start:"Add_pages_start__daZFi",end:"Add_pages_end__03aEj",adult:"Add_pages_adult__ehRxl",scout:"Add_pages_scout__j3h9f",checkbox_grid:"Add_pages_checkbox_grid__UYxaV",checkbox_item:"Add_pages_checkbox_item__OzNUb",new_partner:"Add_pages_new_partner__P7le7"}},6177:function(e,t,n){"use strict";n.r(t);var a=n(5893),r=n(7294),i=n(1338),l=n(905);let s={Education:["Trainer","Advisor","Counselor","Instructor"],Administration:["Main Admin","Employee","Volunteer"],Professionals:["HR","Secretary","IT Specialist","Accountant"],Volunteer:[]},d={Primary:["General","International","Other"],"O Level":["General","International","Other"],"A Level":["TTC","TVET","REB","Other"],Diploma:["Other"],UnderGraduate:["Human Relations","Accounting","IT or Computer Science","Human Science","Economics","Other"],Masters:["International Resources","Accounting","Computing","Human Science","Economics","Other"],Postgraduate:["Environmental Conservation","Accounting","Computing","Human Science","Economics","Other"]},o=["level1","level2","level3","level4"],c=["disability1","disability2","disability3","disability4","disability5"];t.default=function(e){let{all_members:t,districts_provinces:n}=e,[u,p]=(0,r.useState)(),[h,m]=(0,r.useState)();(0,r.useEffect)(()=>{p(n)},[n]),(0,r.useEffect)(()=>{m(t)},[t]);let[g,_]=(0,r.useState)({name:"",age:"",image:null,gender:"",address:{province:"",district:"",street:"",sector:""},department:"",role:"",contact:{phone:"",email:""},tenure:"",education:{level:"",field:""},id:"",maritialstatus:"",dob:"",entryYear:""}),v=parseInt(new Date().getFullYear()),x=e=>{let{name:t,value:n}=e.target;if("educationlevel"===t||"studyfield"===t||"specification"===t)"educationlevel"===t?_(e=>({...e,education:{...e.education,level:n,field:""}})):"studyfield"===t?_(e=>({...e,education:{...e.education,field:n,..."Other"===n?{specification:""}:{}}})):"specification"===t&&_(e=>({...e,education:{...e.education,specification:n}}));else if("startDate"===t||"endDate"===t){let e,a;if(_(e=>({...e,volunteerTime:{...e.volunteerTime,[t]:n}})),""!=g.volunteerTime.startDate&&"endDate"===t?(a=g.volunteerTime.startDate,e=n):""!=g.volunteerTime.endDate&&"startDate"===t&&(e=g.volunteerTime.endDate,a=n),a&&e){if(a>=e)_(e=>({...e,volunteerTime:{...e.volunteerTime,[t]:"",daysDuration:""}})),alert("Volunteer start and end date are not correctly set");else{let t=new Date(a),n=new Date(e),r=n-t;_(e=>({...e,volunteerTime:{...e.volunteerTime,daysDuration:parseInt(Math.floor(r/864e5))}}))}}}else if("dob"===t){let e=v-parseInt(n.split("-")[0]);_(t=>({...t,age:e})),e<17?(alert("Too young to be an adult member"),_(e=>({...e,dob:""}))):_(t=>({...t,dob:n,age:e}))}else"department"===t&&"Volunteer"===n&&_(e=>({...e,volunteerTime:{startDate:"",endDate:"",daysDuration:""}})),"entryYear"===t&&console.log(parseInt(g.entryYear)<parseInt(new Date(g.dob).getFullYear())),_(e=>({...e,[t]:n}))},j=e=>{let{name:t,value:n}=e.target,a={province:{district:null,sector:null,cell:null},district:{sector:null,cell:null},sector:{cell:null}};_(e=>({...e,address:{...e.address,...a[t],[t]:n}}))},y=e=>{let{name:t,value:n}=e.target;_(e=>({...e,contact:{...e.contact,[t]:n}}))},b=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=b.current,t=document.getElementsByTagName("input");return e.addEventListener("click",function(){for(let e=0;e<t.length;e++)t[e].value=""}),()=>{e.removeEventListener("click",function(){for(let e=0;e<t.length;e++)t[e].value=""})}},[]),(0,a.jsxs)("section",{id:i.add_member,className:i.adult,children:[(0,a.jsxs)("nav",{children:[l.Xy.find(e=>"Members"===e.name)&&(0,a.jsx)("a",{href:l.Xy.find(e=>"Members"===e.name).path,children:(0,a.jsx)("button",{className:i.back,children:(0,a.jsx)("i",{class:"fa fa-arrow-left"})})}),(0,a.jsx)("button",{className:i.clear,type:"button",ref:b,children:"Clear"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={required:["name","gender","department","entryYear","id"],address:["sector","province","district"],contact:["phone","email"]},n=null;for(let e in console.log("here"),t){if(console.log("checking: ",e),"required"===e){if(console.log("group is required"),t[e].some(e=>""===g[e].trim())){console.log("missingFieldGroup: ",n=e);break}}else if(console.log("group is else"),t[e].some(t=>""===g[e][t].trim())){console.log("missingFieldGroup: ",n=e);break}console.log("getting out/ starting again")}if(console.log("finally out"),n||(g.image?g.entryYear&&(1950>parseInt(g.entryYear)||parseInt(g.entryYear)>v||parseInt(g.entryYear)-parseInt(new Date(g.dob).getFullYear())<17)?(_(e=>({...e,entryYear:"",tenure:""})),n="entry year"):16!==g.id.length&&(n="id"):n="image"),n)"entry year"===n?parseInt(g.entryYear)-parseInt(new Date(g.dob).getFullYear())<17?alert("Too young to have joined the organisation in ".concat(g.entryYear)):(1950>parseInt(g.entryYear)||parseInt(g.entryYear)>v)&&alert("Entry year should be within the organisation existance and not \n          higher than the current year "):"id"===n?alert("National ID should be 16 digits"):alert("Missing ".concat(n," fields"));else{let e={...g};console.log("allmembers:",h.adults.Kigali),h.adults[g.address.province][g.address.district][g.address.sector][g.address.cell].push(e),alert("".concat(g.name," successfully added to ").concat(g.address.district," adult members")),_({name:"",age:"",image:null,gender:"",address:{province:"",district:"",street:"",sector:""},department:"",role:"",contact:{phone:"",email:""},tenure:"",education:{level:"",field:""},id:"",maritialstatus:"",dob:"",entryYear:""})}},encType:"multipart/form-data",children:[(0,a.jsx)("h3",{children:"Add Member"}),(0,a.jsxs)("article",{children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Name *"}),(0,a.jsx)("input",{type:"text",name:"name",value:g.name,placeholder:"Full Name",onChange:x})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Image"}),(0,a.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:e=>{let t=e.target.files[0],n=new FileReader;n.onloadend=()=>{_(e=>({...e,image:n.result}))},t&&n.readAsDataURL(t)}})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Date of Birth *"}),(0,a.jsx)("input",{type:"date",name:"dob",value:g.dob,onChange:x}),(0,a.jsx)("p",{children:"Personal Details *"}),(0,a.jsx)("input",{type:"number",name:"id",value:g.id,placeholder:"National ID",onChange:x}),(0,a.jsxs)("select",{name:"gender",value:g.gender,onChange:x,children:[(0,a.jsx)("option",{value:"",children:"Gender"}),(0,a.jsx)("option",{value:"Female",children:"Female"}),(0,a.jsx)("option",{value:"Male",children:"Male"})]}),(0,a.jsxs)("select",{name:"maritialstatus",value:g.maritialstatus,onChange:x,children:[(0,a.jsx)("option",{value:"",children:"Maritial Status"}),(0,a.jsx)("option",{value:"Single",children:"Single"}),(0,a.jsx)("option",{value:"Married",children:"Married"})]})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Education *"}),(0,a.jsxs)("select",{name:"educationlevel",value:g.education.level,onChange:x,children:[(0,a.jsx)("option",{value:"",children:"Education Level"}),Object.keys(d).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"studyfield",value:g.education.field,onChange:x,children:[(0,a.jsx)("option",{value:"",children:"Field of Study"}),g.education.level&&d[g.education.level].map(e=>(0,a.jsx)("option",{value:e,children:e}))]}),g.education.field&&"Other"===g.education.field&&(0,a.jsx)("input",{name:"specification",value:g.education.specification,onChange:x,placeholder:"Specification"}),(0,a.jsx)("p",{children:"Disabilities"}),(0,a.jsx)("p",{children:c.map(e=>(0,a.jsxs)("span",{id:i.checkbox,children:[(0,a.jsx)("input",{type:"checkbox",id:i.checkbox,name:"disabilities",value:c,onChange:x,checked:e.disabilities}),e]},e))})]})]}),(0,a.jsxs)("aside",{children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Contact *"}),(0,a.jsx)("input",{type:"text",name:"phone",placeholder:"Phone Number",value:g.contact.phone,onChange:y}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:g.contact.email,onChange:y})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Address * "}),(0,a.jsxs)("select",{name:"province",id:i.province,value:g.address.province,onChange:j,children:[(0,a.jsx)("option",{value:"",children:"Select province"}),u&&u.length>0&&Object.keys(u).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"district",id:i.district,value:g.address.district,onChange:j,children:[(0,a.jsx)("option",{value:"",children:"Select district"}),g.address.province&&Object.keys(u[g.address.province].districts).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"sector",id:i.province,value:g.address.sector,onChange:j,children:[(0,a.jsx)("option",{value:"",children:"Select sector"}),g.address.district&&Object.keys(u[g.address.province].districts[g.address.district]).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"cell",id:i.district,value:g.address.cell,onChange:j,children:[(0,a.jsx)("option",{value:"",children:"Select cell"}),g.address.sector&&u[g.address.province].districts[g.address.district][g.address.sector].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("input",{type:"text",name:"street",value:g.address.street,onChange:j,placeholder:"Enter Your Street (Not Required) "})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Membership *"}),(0,a.jsx)("input",{type:"number",name:"entryYear",placeholder:"Entry Year",value:g.entryYear,onChange:x}),(0,a.jsx)("p",{children:"Training Level *"}),(0,a.jsx)("p",{children:o.map(e=>(0,a.jsxs)("span",{id:i.checkbox,children:[(0,a.jsx)("input",{type:"checkbox",id:i.checkbox,name:"training",value:e,onChange:x,checked:e.selected}),e]},e))}),(0,a.jsx)("p",{children:"Department *"}),(0,a.jsxs)("select",{name:"department",value:g.department,onChange:x,children:[(0,a.jsx)("option",{value:"",children:"Department"}),Object.keys(s).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),g.department&&("Volunteer"===g.department?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Start and End Date"}),(0,a.jsx)("input",{type:"date",name:"startDate",id:i.left,value:g.volunteerTime.startDate,onChange:x}),(0,a.jsx)("input",{type:"date",name:"endDate",id:i.right,value:g.volunteerTime.endDate,onChange:x}),g.volunteerTime.daysDuration&&(0,a.jsx)("input",{placeholder:"Duration: ".concat(g.volunteerTime.daysDuration>=30?"".concat(parseInt(g.volunteerTime.daysDuration/30)," ").concat(parseInt(g.volunteerTime.daysDuration/30)>1?"months":"month"):"".concat(g.volunteerTime.daysDuration," days")),readOnly:!0})]}):(0,a.jsxs)("select",{name:"role",value:g.role,onChange:x,children:[(0,a.jsx)("option",{value:"",children:"Role"}),s[g.department].map(e=>(0,a.jsx)("option",{value:e,children:e}))]}))]})]}),(0,a.jsx)("footer",{children:(0,a.jsx)("button",{type:"submit",children:"Add Member"})})]})]})}}},function(e){e.O(0,[342,774,888,179],function(){return e(e.s=3626)}),_N_E=e.O()}]);