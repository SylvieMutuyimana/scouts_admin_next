(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{812:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members/addscouts",function(){return n(1447)}])},1338:function(e){e.exports={add_report:"Add_pages_add_report__Yq1zu",add_member:"Add_pages_add_member__hC0jr",add_volunteer:"Add_pages_add_volunteer__8kK0A",add_partner:"Add_pages_add_partner__r_XQ5",add_activity:"Add_pages_add_activity__GEITm",back:"Add_pages_back__XKclf",add:"Add_pages_add__JXcWO",clear:"Add_pages_clear__WArFl",left:"Add_pages_left__l9jeb",right:"Add_pages_right__9TMvx",district:"Add_pages_district__OD9kR",province:"Add_pages_province__VYhQB",title:"Add_pages_title__6VH9j",contact:"Add_pages_contact__1v8UL",start:"Add_pages_start__daZFi",end:"Add_pages_end__03aEj",adult:"Add_pages_adult__ehRxl",scout:"Add_pages_scout__j3h9f",checkbox_grid:"Add_pages_checkbox_grid__UYxaV",checkbox_item:"Add_pages_checkbox_item__OzNUb",new_partner:"Add_pages_new_partner__P7le7"}},1447:function(e,t,n){"use strict";n.r(t);var a=n(5893),r=n(7294),l=n(1338),s=n(905);let i=["badge1","badge2","badge3","badge4"],d={group1:["unit101","unit102","unit103"],group2:["unit201","unit202","unit203"],group3:["unit301","unit302","unit303"],group4:["unit401","unit402","unit403"],group5:["unit501","unit502","unit503"],group6:["unit601","unit602","unit603"]};t.default=function(e){let{all_members:t,districts_provinces:n}=e,o=(0,r.useRef)(null),c=parseInt(new Date().getFullYear()),[u,p]=(0,r.useState)(),[h,g]=(0,r.useState)();(0,r.useEffect)(()=>{p(n)},[n]),(0,r.useEffect)(()=>{g(t)},[t]),console.log("districts_provinces: ",n),console.log("rwandaProvinces: ",u),console.log("all_members: ",t),console.log("allmembers: ",h);let[m,_]=(0,r.useState)({name:"",image:null,gender:"",address:{province:"",district:"",street:"",cell:"",sector:"",group:"",unit:""},occupation:"",contact:{phone:"",email:""},entryYear:"",tenure:"",dob:"",age:"",badges:"",more:{mother:"",father:"",nationalid:""}}),[x,j]=(0,r.useState)({young:!1,adult:!1}),[b,v]=(0,r.useState)(""),f=e=>{let{name:t,value:n}=e.target;if(_(e=>({...e,[t]:n})),"dob"===t){let e=c-parseInt(n.split("-")[0]);_(t=>({...t,age:e})),v(e>=6&&e<=12?"Abatoni":e>=13&&e<=16?"Inyesha":e>=16&&e<=20?"Abahizi":e>=21&&e<=24?"Ingenzi":e>=25?"Adults":""),e<6?(alert("Too young to be a scout"),_(e=>({...e,dob:""}))):e>=6&&e<=20?(j(e=>({...e,adult:!1,young:!0})),_(e=>({...e,more:{...e.more,id:null}}))):e>20&&(j(e=>({...e,adult:!0,young:!1})),_(e=>({...e,more:{...e.more,father:null,mother:null}})))}else if("entryYear"===t){let e=c-parseInt(n);_(t=>({...t,tenure:e}))}else["mother","father","nationalid"].includes(t)&&_(e=>({...e,more:{...e.more,name:n}}))},y=e=>{let{name:t,checked:n}=e.target;_(e=>({...e,badges:n?[...e.badges,t]:e.badges.filter(e=>e!==t)}))},A=e=>{let{name:t,value:n}=e.target;if("phone"===t||"email"===t)_(e=>({...e,contact:{...e.contact,[t]:n}}));else{let e={province:{district:null,sector:null,cell:null,group:null,unit:null},district:{sector:null,cell:null,group:null,unit:null},sector:{cell:null,group:null,unit:null},cell:{group:null,unit:null},group:{unit:null},unit:{}};_(a=>({...a,address:{...a.address,...e[t],[t]:n}}))}};return(0,r.useEffect)(()=>{let e=o.current,t=document.getElementsByTagName("input");return e.addEventListener("click",function(){for(let e=0;e<t.length;e++)t[e].value=""}),()=>{e.removeEventListener("click",function(){for(let e=0;e<t.length;e++)t[e].value=""})}},[]),(0,a.jsxs)("section",{id:l.add_member,className:l.scout,children:[(0,a.jsxs)("nav",{children:[s.Xy.find(e=>"Members"===e.name)&&(0,a.jsx)("a",{href:s.Xy.find(e=>"Members"===e.name).path,children:(0,a.jsx)("button",{className:l.back,children:(0,a.jsx)("i",{class:"fa fa-arrow-left"})})}),(0,a.jsx)("button",{className:l.clear,type:"button",ref:o,children:"Clear"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={required:["name","gender","occupation","entryYear"],address:["sector","province","district","group","unit"],contact:["phone","email"]},n=null;for(let e in console.log("here"),t){if(console.log("checking: ",e),"required"===e){if(console.log("group is required"),t[e].some(e=>""===m[e].trim())){console.log("missingFieldGroup: ",n=e);break}}else if(console.log("group is else"),t[e].some(t=>""===m[e][t].trim())){console.log("missingFieldGroup: ",n=e);break}console.log("getting out/ starting again")}if(console.log("finally out"),!n&&(m.image?m.entryYear&&(1950>parseInt(m.entryYear)||parseInt(m.entryYear)>c||parseInt(m.entryYear)-parseInt(new Date(m.dob).getFullYear())<17)?(_(e=>({...e,entryYear:"",tenure:""})),n="entry year"):m.id&&16!==m.id.length&&(n="id"):n="image"),n)"entry year"===n?parseInt(m.entryYear)-parseInt(new Date(m.dob).getFullYear())<17?alert("Too young to have joined the organisation in ".concat(m.entryYear)):(1950>parseInt(m.entryYear)||parseInt(m.entryYear)>c)&&alert("Entry year should be within the organisation existance and not \n          higher than the current year "):"id"===n?alert("National ID should be 17 digits"):alert("Missing ".concat(n," fields"));else{let e={...m};console.log("allmembers:",h.scouts.Kigali),h.scouts[m.address.province][m.address.district][m.address.sector][m.address.cell].push(e),alert("".concat(m.name," successfully added to ").concat(m.address.district," members")),_({name:"",age:"",image:null,gender:"",address:{province:"",district:"",street:"",sector:"",cell:""},occupation:"",contact:{phone:"",email:""},tenure:"",dob:"",age:"",badges:"",more:{mother:"",father:"",nationalid:""}}),j({young:!1,adult:!1}),v("")}},encType:"multipart/form-data",id:!0,children:[(0,a.jsx)("h3",{children:"Add Member"}),(0,a.jsxs)("article",{children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Name * "}),(0,a.jsx)("input",{type:"text",name:"name",value:m.name,placeholder:"Full Name",onChange:f})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Image *"}),(0,a.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:e=>{let t=e.target.files[0],n=new FileReader;n.onloadend=()=>{_(e=>({...e,image:n.result}))},t&&n.readAsDataURL(t)}})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Gender *"}),(0,a.jsxs)("select",{name:"gender",value:m.gender,onChange:f,children:[(0,a.jsx)("option",{value:"",children:"Choose Gender"}),(0,a.jsx)("option",{value:"Female",children:"Female"}),(0,a.jsx)("option",{value:"Male",children:"Male"})]})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Date of Birth * "}),(0,a.jsx)("input",{type:"date",name:"dob",value:m.dob,onChange:f}),(0,a.jsx)("input",{type:"text",name:"typed",value:b,readOnly:!0,placeholder:"Group Type"}),!0===x.young&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",name:"mother",placeholder:"Mother's full name",id:l.left,value:m.more.mother,onChange:f}),(0,a.jsx)("input",{type:"text",name:"father",placeholder:"Fatherr's full name",id:l.right,value:m.more.father,onChange:f})]}),!0===x.adult&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{type:"text",name:"nationalid",placeholder:"Enter National ID",value:m.more.id,onChange:f})})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Occupation * "}),(0,a.jsx)("input",{type:"text",name:"occupation",value:m.occupation,placeholder:"Occupation",onChange:f})]})]}),(0,a.jsxs)("aside",{children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Contact * "}),(0,a.jsx)("input",{type:"text",name:"phone",value:m.contact.phone,onChange:A,placeholder:"Phone Number"}),(0,a.jsx)("input",{type:"email",name:"email",value:m.contact.email,onChange:A,placeholder:"Email"})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Address * "}),(0,a.jsxs)("select",{name:"province",id:l.province,value:m.address.province,onChange:A,children:[(0,a.jsx)("option",{value:"",children:"Select province"}),u&&u.length>0&&Object.keys(u).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"district",id:l.district,value:m.address.district,onChange:A,children:[(0,a.jsx)("option",{value:"",children:"Select district"}),m.address.province&&Object.keys(u[m.address.province].districts).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"sector",id:l.province,value:m.address.sector,onChange:A,children:[(0,a.jsx)("option",{value:"",children:"Select sector"}),m.address.district&&Object.keys(u[m.address.province].districts[m.address.district]).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"cell",id:l.district,value:m.address.cell,onChange:A,children:[(0,a.jsx)("option",{value:"",children:"Select cell"}),m.address.sector&&u[m.address.province].districts[m.address.district][m.address.sector].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"group",id:l.province,value:m.address.group,onChange:A,children:[(0,a.jsx)("option",{value:"",children:"Select group"}),m.address.cell&&Object.keys(d).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{name:"unit",id:l.district,value:m.address.unit,onChange:A,children:[(0,a.jsx)("option",{value:"",children:"Select unit"}),m.address.group&&d[m.address.group].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("input",{type:"text",name:"street",value:m.address.street,onChange:A,placeholder:"Enter Your Street (Not Required) "})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{children:"Membership * "}),(0,a.jsx)("input",{type:"number",name:"entryYear",placeholder:"Entry Year",value:m.entryYear,onChange:f}),(0,a.jsx)("p",{children:"Badges Earned "}),(0,a.jsx)("div",{className:l.checkbox_grid,children:i.map(e=>(0,a.jsxs)("div",{className:l.checkbox_item,children:[(0,a.jsx)("input",{type:"checkbox",id:e,name:e,onChange:y,checked:m.badges.includes(e)}),(0,a.jsx)("label",{htmlFor:e,children:e})]},e))})]})]}),(0,a.jsx)("footer",{children:(0,a.jsx)("button",{type:"submit",children:"Add Member"})})]})]})}}},function(e){e.O(0,[342,774,888,179],function(){return e(e.s=812)}),_N_E=e.O()}]);